{% extends 'pharmacy/base.html' %}

{% block extra_css %}
<style>
    .success-container {
        max-width: 800px;
        margin: 0 auto;
        padding: 2rem 1rem;
        text-align: center;
    }

    .success-header {
        background: linear-gradient(135deg, #28a745, #20c997);
        color: white;
        padding: 3rem 2rem;
        border-radius: 20px;
        margin-bottom: 2rem;
        position: relative;
        overflow: hidden;
    }

    .success-header::before {
        content: '';
        position: absolute;
        top: -50%;
        left: -50%;
        width: 200%;
        height: 200%;
        background: radial-gradient(circle, rgba(255,255,255,0.1) 0%, transparent 70%);
        animation: pulse 3s ease-in-out infinite;
    }

    @keyframes pulse {
        0%, 100% { transform: scale(1) rotate(0deg); }
        50% { transform: scale(1.1) rotate(180deg); }
    }

    .success-icon {
        font-size: 4rem;
        margin-bottom: 1rem;
        animation: bounce 2s ease-in-out infinite;
    }

    @keyframes bounce {
        0%, 20%, 50%, 80%, 100% { transform: translateY(0); }
        40% { transform: translateY(-10px); }
        60% { transform: translateY(-5px); }
    }

    .success-title {
        font-size: 2.5rem;
        font-weight: bold;
        margin-bottom: 1rem;
        position: relative;
        z-index: 2;
    }

    .success-subtitle {
        font-size: 1.2rem;
        opacity: 0.9;
        position: relative;
        z-index: 2;
    }

    .order-details {
        background: white;
        border-radius: 15px;
        box-shadow: 0 10px 30px rgba(0,0,0,0.1);
        padding: 2rem;
        margin-bottom: 2rem;
    }

    .order-number {
        background: #f8f9fa;
        border: 2px solid #28a745;
        border-radius: 10px;
        padding: 1.5rem;
        margin-bottom: 2rem;
    }

    .order-number h3 {
        color: #28a745;
        font-weight: bold;
        margin-bottom: 0.5rem;
    }

    .order-id {
        font-size: 2rem;
        font-weight: bold;
        color: #2c3e50;
        font-family: 'Courier New', monospace;
    }

    .customer-info {
        background: #f8f9fa;
        border-radius: 10px;
        padding: 1.5rem;
        margin-bottom: 2rem;
        text-align: left;
    }

    .info-section {
        margin-bottom: 1.5rem;
    }

    .info-section:last-child {
        margin-bottom: 0;
    }

    .info-title {
        font-weight: bold;
        color: #2c3e50;
        margin-bottom: 0.5rem;
        display: flex;
        align-items: center;
        gap: 0.5rem;
    }

    .info-content {
        color: #495057;
        margin-left: 1.5rem;
    }

    .order-items {
        margin-bottom: 2rem;
    }

    .order-item {
        display: flex;
        justify-content: space-between;
        align-items: center;
        padding: 1rem;
        border-bottom: 1px solid #dee2e6;
        background: #f8f9fa;
        margin-bottom: 0.5rem;
        border-radius: 8px;
    }

    .item-details h6 {
        color: #2c3e50;
        margin-bottom: 0.25rem;
        font-weight: 600;
    }

    .item-details small {
        color: #6c757d;
    }

    .item-price {
        font-weight: bold;
        color: #28a745;
        font-size: 1.1rem;
    }

    .total-section {
        background: linear-gradient(135deg, #28a745, #20c997);
        color: white;
        padding: 1.5rem;
        border-radius: 10px;
        margin-bottom: 2rem;
    }

    .total-amount {
        font-size: 2rem;
        font-weight: bold;
        margin-bottom: 0.5rem;
    }

    .next-steps {
        background: #fff3cd;
        border: 1px solid #ffeaa7;
        color: #856404;
        padding: 2rem;
        border-radius: 15px;
        margin-bottom: 2rem;
    }

    .next-steps h4 {
        color: #856404;
        margin-bottom: 1rem;
    }

    .step {
        display: flex;
        align-items: flex-start;
        gap: 1rem;
        margin-bottom: 1rem;
        padding: 1rem;
        background: rgba(255,255,255,0.5);
        border-radius: 8px;
    }

    .step:last-child {
        margin-bottom: 0;
    }

    .step-number {
        background: #28a745;
        color: white;
        width: 30px;
        height: 30px;
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        font-weight: bold;
        flex-shrink: 0;
    }

    .step-content {
        flex-grow: 1;
    }

    .action-buttons {
        display: flex;
        gap: 1rem;
        justify-content: center;
        flex-wrap: wrap;
        margin-top: 2rem;
    }

    .btn-primary {
        background: #28a745;
        border: none;
        padding: 1rem 2rem;
        border-radius: 25px;
        color: white;
        text-decoration: none;
        font-weight: bold;
        transition: all 0.3s ease;
        display: inline-flex;
        align-items: center;
        gap: 0.5rem;
    }

    .btn-primary:hover {
        background: #1e7e34;
        transform: translateY(-2px);
        box-shadow: 0 5px 15px rgba(0,0,0,0.2);
        color: white;
        text-decoration: none;
    }

    .btn-secondary {
        background: transparent;
        border: 2px solid #6c757d;
        padding: 1rem 2rem;
        border-radius: 25px;
        color: #6c757d;
        text-decoration: none;
        font-weight: bold;
        transition: all 0.3s ease;
        display: inline-flex;
        align-items: center;
        gap: 0.5rem;
    }

    .btn-secondary:hover {
        background: #6c757d;
        color: white;
        text-decoration: none;
    }

    .contact-info {
        background: #e8f5e8;
        border: 1px solid #28a745;
        border-radius: 10px;
        padding: 1.5rem;
        margin-top: 2rem;
    }

    .contact-info h5 {
        color: #28a745;
        margin-bottom: 1rem;
    }

    @media (max-width: 768px) {
        .success-title {
            font-size: 2rem;
        }

        .order-id {
            font-size: 1.5rem;
        }

        .order-item {
            flex-direction: column;
            align-items: flex-start;
            gap: 0.5rem;
        }

        .action-buttons {
            flex-direction: column;
            align-items: center;
        }

        .btn-primary, .btn-secondary {
            width: 100%;
            justify-content: center;
        }
    }
</style>
{% endblock %}

{% block content %}
<div class="success-container">
    <div class="success-header">
        <div class="success-icon">üéâ</div>
        <h1 class="success-title">–ó–∞–º–æ–≤–ª–µ–Ω–Ω—è –æ—Ñ–æ—Ä–º–ª–µ–Ω–æ!</h1>
        <p class="success-subtitle">–î—è–∫—É—î–º–æ –∑–∞ –ø–æ–∫—É–ø–∫—É –≤ –Ω–∞—à—ñ–π –∞–ø—Ç–µ—Ü—ñ</p>
    </div>

    <div class="order-details">
        <div class="order-number">
            <h3><i class="bi bi-receipt"></i> –ù–æ–º–µ—Ä –∑–∞–º–æ–≤–ª–µ–Ω–Ω—è</h3>
            <div class="order-id">#{{ order.id }}</div>
        </div>

        <div class="customer-info">
            <div class="info-section">
                <div class="info-title">
                    <i class="bi bi-person"></i>
                    –ö–æ–Ω—Ç–∞–∫—Ç–Ω–∞ —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—è
                </div>
                <div class="info-content">
                    <strong>{{ order.customer_name }}</strong><br>
                    <i class="bi bi-telephone"></i> {{ order.customer_phone }}<br>
                    {% if order.customer_email %}
                        <i class="bi bi-envelope"></i> {{ order.customer_email }}
                    {% endif %}
                </div>
            </div>

            <div class="info-section">
                <div class="info-title">
                    <i class="bi bi-geo-alt"></i>
                    –ê–¥—Ä–µ—Å–∞ –¥–æ—Å—Ç–∞–≤–∫–∏
                </div>
                <div class="info-content">{{ order.delivery_address }}</div>
            </div>

            {% if order.notes %}
            <div class="info-section">
                <div class="info-title">
                    <i class="bi bi-chat-text"></i>
                    –ü—Ä–∏–º—ñ—Ç–∫–∏
                </div>
                <div class="info-content">{{ order.notes }}</div>
            </div>
            {% endif %}

            <div class="info-section">
                <div class="info-title">
                    <i class="bi bi-calendar"></i>
                    –î–∞—Ç–∞ –∑–∞–º–æ–≤–ª–µ–Ω–Ω—è
                </div>
                <div class="info-content">{{ order.created_at|date:"d.m.Y H:i" }}</div>
            </div>
        </div>

        <div class="order-items">
            <h4 style="color: #2c3e50; margin-bottom: 1rem;">
                <i class="bi bi-bag"></i> –ó–∞–º–æ–≤–ª–µ–Ω—ñ —Ç–æ–≤–∞—Ä–∏
            </h4>
            {% for item in order.items.all %}
            <div class="order-item">
                <div class="item-details">
                    <h6>{{ item.product.name }}</h6>
                    <small>{{ item.quantity }} —à—Ç. √ó {{ item.price }} –≥—Ä–Ω</small>
                </div>
                <div class="item-price">{{ item.total_price }} –≥—Ä–Ω</div>
            </div>
            {% endfor %}
        </div>

        <div class="total-section">
            <div class="total-amount">{{ order.total_amount }} –≥—Ä–Ω</div>
            <div>–ó–∞–≥–∞–ª—å–Ω–∞ —Å—É–º–∞ –∑–∞–º–æ–≤–ª–µ–Ω–Ω—è</div>
        </div>
    </div>

    <div class="next-steps">
        <h4><i class="bi bi-list-check"></i> –©–æ –¥–∞–ª—ñ?</h4>

        <div class="step">
            <div class="step-number">1</div>
            <div class="step-content">
                <strong>–ü—ñ–¥—Ç–≤–µ—Ä–¥–∂–µ–Ω–Ω—è</strong><br>
                –ú–∏ –∑–≤'—è–∂–µ–º–æ—Å—è –∑ –≤–∞–º–∏ –ø—Ä–æ—Ç—è–≥–æ–º –≥–æ–¥–∏–Ω–∏ –¥–ª—è –ø—ñ–¥—Ç–≤–µ—Ä–¥–∂–µ–Ω–Ω—è –∑–∞–º–æ–≤–ª–µ–Ω–Ω—è
            </div>
        </div>

        <div class="step">
            <div class="step-number">2</div>
            <div class="step-content">
                <strong>–ö–æ–º–ø–ª–µ–∫—Ç–∞—Ü—ñ—è</strong><br>
                –¢–æ–≤–∞—Ä–∏ –±—É–¥—É—Ç—å –∑—ñ–±—Ä–∞–Ω—ñ —Ç–∞ –ø—ñ–¥–≥–æ—Ç–æ–≤–ª–µ–Ω—ñ –¥–æ –≤—ñ–¥–ø—Ä–∞–≤–∫–∏
            </div>
        </div>

        <div class="step">
            <div class="step-number">3</div>
            <div class="step-content">
                <strong>–î–æ—Å—Ç–∞–≤–∫–∞</strong><br>
                –ó–∞–º–æ–≤–ª–µ–Ω–Ω—è –±—É–¥–µ –¥–æ—Å—Ç–∞–≤–ª–µ–Ω–æ –ø—Ä–æ—Ç—è–≥–æ–º 1-2 —Ä–æ–±–æ—á–∏—Ö –¥–Ω—ñ–≤
            </div>
        </div>
    </div>

    <div class="action-buttons">
        <a href="{% url 'pharmacy:catalog' %}" class="btn-primary">
            <i class="bi bi-bag"></i>
            –ü—Ä–æ–¥–æ–≤–∂–∏—Ç–∏ –ø–æ–∫—É–ø–∫–∏
        </a>
        <a href="{% url 'pharmacy:home' %}" class="btn-secondary">
            <i class="bi bi-house"></i>
            –ù–∞ –≥–æ–ª–æ–≤–Ω—É
        </a>
    </div>

    <div class="contact-info">
        <h5><i class="bi bi-headset"></i> –ü–æ—Ç—Ä—ñ–±–Ω–∞ –¥–æ–ø–æ–º–æ–≥–∞?</h5>
        <p>–Ø–∫—â–æ —É –≤–∞—Å –≤–∏–Ω–∏–∫–ª–∏ –ø–∏—Ç–∞–Ω–Ω—è —â–æ–¥–æ –∑–∞–º–æ–≤–ª–µ–Ω–Ω—è, –∑–≤'—è–∂—ñ—Ç—å—Å—è –∑ –Ω–∞–º–∏:</p>
        <div style="display: flex; justify-content: center; gap: 2rem; flex-wrap: wrap;">
            <a href="tel:+380441234567" style="color: #28a745; text-decoration: none;">
                <i class="bi bi-telephone-fill"></i> +38 (044) 123-45-67
            </a>
            <a href="mailto:info@blin-pharmacy.ua" style="color: #28a745; text-decoration: none;">
                <i class="bi bi-envelope-fill"></i> info@blin-pharmacy.ua
            </a>
        </div>
    </div>
</div>

<script>
document.addEventListener('DOMContentLoaded', function() {
    setTimeout(function() {
        const confetti = document.createElement('div');
        confetti.innerHTML = 'üéäüéâ‚ú®üéäüéâ‚ú®üéäüéâ‚ú®';
        confetti.style.position = 'fixed';
        confetti.style.top = '20px';
        confetti.style.left = '50%';
        confetti.style.transform = 'translateX(-50%)';
        confetti.style.fontSize = '2rem';
        confetti.style.animation = 'fall 3s ease-out forwards';
        confetti.style.zIndex = '9999';
        confetti.style.pointerEvents = 'none';

        document.body.appendChild(confetti);

        setTimeout(() => confetti.remove(), 3000);
    }, 500);
});

const style = document.createElement('style');
style.textContent = `
    @keyframes fall {
        0% { transform: translateX(-50%) translateY(-100px) rotate(0deg); opacity: 1; }
        100% { transform: translateX(-50%) translateY(100vh) rotate(360deg); opacity: 0; }
    }
`;
document.head.appendChild(style);
</script>
{% endblock %}